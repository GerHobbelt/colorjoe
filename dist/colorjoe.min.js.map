{"version":3,"file":"colorjoe.min.js","sources":["../node_modules/dragjs/dist/dragjs.umd.js","../node_modules/onecolor/one-color.js","../src/utils.js","../src/extras.js","../src/colorjoe.js"],"sourcesContent":["(function (root, factory) {\r\n\r\n        if (typeof exports === 'object') {\r\n            module.exports = factory();\r\n        }\r\n        else if (typeof define === 'function' && define.amd) {\r\n            define(factory);\r\n        }\r\n        else {\r\n            root.drag = factory();\r\n        }\r\n\r\n    }(this, function () {\r\n\r\n        /*! dragjs - v0.7.0 - Juho Vepsalainen <bebraw@gmail.com> - MIT\nhttps://bebraw.github.com/dragjs - 2016-08-12 */\nvar drag = (function() {\n    function drag(elem, cbs) {\n        if(!elem) {\n            console.warn('drag is missing elem!');\n            return;\n        }\n\n        dragTemplate(elem, cbs, 'touchstart', 'touchmove', 'touchend');\n        dragTemplate(elem, cbs, 'mousedown', 'mousemove', 'mouseup');\n    }\n\n    function xyslider(o) {\n        var twod = div(o['class'] || '', o.parent);\n        var pointer = div('pointer', twod);\n        div('shape shape1', pointer);\n        div('shape shape2', pointer);\n        div('bg bg1', twod);\n        div('bg bg2', twod);\n\n        drag(twod, attachPointer(o.cbs, pointer));\n\n        return {\n            background: twod,\n            pointer: pointer\n        };\n    }\n\n    function slider(o) {\n        var oned = div(o['class'], o.parent);\n        var pointer = div('pointer', oned);\n        div('shape', pointer);\n        div('bg', oned);\n\n        drag(oned, attachPointer(o.cbs, pointer));\n\n        return {\n            background: oned,\n            pointer: pointer\n        };\n    }\n\n    drag.xyslider = xyslider;\n    drag.slider = slider;\n\n    return drag;\n\n    function attachPointer(cbs, pointer) {\n        var ret = {};\n\n        for(var n in cbs) {\n          ret[n] = wrap(cbs[n]);\n        }\n\n        function wrap(fn) {\n            return function(p) {\n                p.pointer = pointer;\n                fn(p);\n            };\n        }\n\n        return ret;\n    }\n\n    // move to elemutils lib?\n    function div(klass, p) {\n        return e('div', klass, p);\n    }\n\n    function e(type, klass, p) {\n        var elem = document.createElement(type);\n        if(klass) {\n          elem.className = klass;\n        }\n        p.appendChild(elem);\n\n        return elem;\n    }\n\n    function dragTemplate(elem, cbs, down, move, up) {\n        var dragging = false;\n\n        cbs = getCbs(cbs);\n\n        var beginCb = cbs.begin;\n        var changeCb = cbs.change;\n        var endCb = cbs.end;\n\n        on(elem, down, function(e) {\n            dragging = true;\n\n            var moveHandler = partial(callCb, changeCb, elem);\n            function upHandler() {\n                dragging = false;\n\n                off(document, move, moveHandler);\n                off(document, up, upHandler);\n\n                callCb(endCb, elem, e);\n            }\n\n            on(document, move, moveHandler);\n            on(document, up, upHandler);\n\n            callCb(beginCb, elem, e);\n        });\n    }\n\n    function on(elem, evt, handler) {\n        elem.addEventListener(evt, handler, false);\n    }\n\n    function off(elem, evt, handler) {\n      elem.removeEventListener(evt, handler, false);\n    }\n\n    function getCbs(cbs) {\n        if(!cbs) {\n            var initialOffset;\n            var initialPos;\n\n            return {\n                begin: function(c) {\n                    initialOffset = {x: c.elem.offsetLeft, y: c.elem.offsetTop};\n                    initialPos = c.cursor;\n                },\n                change: function(c) {\n                    style(c.elem, 'left', (initialOffset.x + c.cursor.x - initialPos.x) + 'px');\n                    style(c.elem, 'top', (initialOffset.y + c.cursor.y - initialPos.y) + 'px');\n                },\n                end: empty\n            };\n        }\n        else {\n            return {\n                begin: cbs.begin || empty,\n                change: cbs.change || empty,\n                end: cbs.end || empty\n            };\n        }\n    }\n\n    // TODO: set draggable class (handy for fx)\n    function style(e, prop, value) {\n        e.style[prop] = value;\n    }\n\n    function empty() {}\n\n    function callCb(cb, elem, e) {\n        e.preventDefault();\n\n        var offset = findPos(elem);\n        var width = elem.clientWidth;\n        var height = elem.clientHeight;\n        var cursor = {\n            x: cursorX(elem, e),\n            y: cursorY(elem, e)\n        };\n        var x = (cursor.x - offset.x) / width;\n        var y = (cursor.y - offset.y) / height;\n\n        cb({\n            x: isNaN(x)? 0: x,\n            y: isNaN(y)? 0: y,\n            cursor: cursor,\n            elem: elem,\n            e: e\n        });\n    }\n\n    // http://stackoverflow.com/questions/4394747/javascript-curry-function\n    function partial(fn) {\n        var slice = Array.prototype.slice;\n        var args = slice.apply(arguments, [1]);\n\n        return function() {\n            return fn.apply(null, args.concat(slice.apply(arguments)));\n        };\n    }\n\n    // http://www.quirksmode.org/js/findpos.html\n    function findPos(e) {\n        var r = e.getBoundingClientRect();\n\n        return {\n            x: r.left,\n            y: r.top\n        };\n    }\n\n    // http://javascript.about.com/library/blmousepos.htm\n    function cursorX(elem, evt) {\n        var evtPos = evt.touches ? evt.touches[evt.touches.length -1] : evt;\n        return evtPos.clientX;\n    }\n    function cursorY(elem, evt) {\n        var evtPos = evt.touches ? evt.touches[evt.touches.length -1] : evt;\n        return evtPos.clientY;\n    }\n})();\r\n        return drag;\r\n\r\n    }));","!function(t,r){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=r():\"function\"==typeof define&&define.amd?define(r):(t.one=t.one||{},t.one.color=r())}(this,function(){\"use strict\";function t(r){if(Array.isArray(r)){if(\"string\"==typeof r[0]&&\"function\"==typeof t[r[0]])return new t[r[0]](r.slice(1,r.length));if(4===r.length)return new t.RGB(r[0]/255,r[1]/255,r[2]/255,r[3]/255)}else if(\"string\"==typeof r){var n=r.toLowerCase();t.namedColors[n]&&(r=\"#\"+t.namedColors[n]),\"transparent\"===n&&(r=\"rgba(0,0,0,0)\");var s=r.match(o);if(s){var i=s[1].toUpperCase(),u=e(s[8])?s[8]:parseFloat(s[8]),h=\"H\"===i[0],c=s[3]?100:h?360:255,f=s[5]||h?100:255,l=s[7]||h?100:255;if(e(t[i]))throw new Error(\"color.\"+i+\" is not installed.\");return new t[i](parseFloat(s[2])/c,parseFloat(s[4])/f,parseFloat(s[6])/l,u)}r.length<6&&(r=r.replace(/^#?([0-9a-f])([0-9a-f])([0-9a-f])$/i,\"$1$1$2$2$3$3\"));var p=r.match(/^#?([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])$/i);if(p)return new t.RGB(parseInt(p[1],16)/255,parseInt(p[2],16)/255,parseInt(p[3],16)/255);if(t.CMYK){var d=r.match(new RegExp(\"^cmyk\\\\(\"+a.source+\",\"+a.source+\",\"+a.source+\",\"+a.source+\"\\\\)$\",\"i\"));if(d)return new t.CMYK(parseFloat(d[1])/100,parseFloat(d[2])/100,parseFloat(d[3])/100,parseFloat(d[4])/100)}}else if(\"object\"==typeof r&&r.isColor)return r;return!1}var r=[],e=function(t){return void 0===t},n=/\\s*(\\.\\d+|\\d+(?:\\.\\d+)?)(%)?\\s*/,a=/\\s*(\\.\\d+|100|\\d?\\d(?:\\.\\d+)?)%\\s*/,o=new RegExp(\"^(rgb|hsl|hsv)a?\\\\(\"+n.source+\",\"+n.source+\",\"+n.source+\"(?:,\"+/\\s*(\\.\\d+|\\d+(?:\\.\\d+)?)\\s*/.source+\")?\\\\)$\",\"i\");t.namedColors={},t.installColorSpace=function(n,a,o){function s(r,e){var n={};n[e.toLowerCase()]=function(){return this.rgb()[e.toLowerCase()]()},t[e].propertyNames.forEach(function(t){var r=\"black\"===t?\"k\":t.charAt(0);n[t]=n[r]=function(r,n){return this[e.toLowerCase()]()[t](r,n)}});for(var a in n)n.hasOwnProperty(a)&&void 0===t[r].prototype[a]&&(t[r].prototype[a]=n[a])}t[n]=function(t){var r=Array.isArray(t)?t:arguments;a.forEach(function(t,e){var o=r[e];if(\"alpha\"===t)this._alpha=isNaN(o)||o>1?1:o<0?0:o;else{if(isNaN(o))throw new Error(\"[\"+n+\"]: Invalid color: (\"+a.join(\",\")+\")\");\"hue\"===t?this._hue=o<0?o-Math.floor(o):o%1:this[\"_\"+t]=o<0?0:o>1?1:o}},this)},t[n].propertyNames=a;var i=t[n].prototype;[\"valueOf\",\"hex\",\"hexa\",\"css\",\"cssa\"].forEach(function(t){i[t]=i[t]||(\"RGB\"===n?i.hex:function(){return this.rgb()[t]()})}),i.isColor=!0,i.equals=function(t,r){e(r)&&(r=1e-10),t=t[n.toLowerCase()]();for(var o=0;o<a.length;o+=1)if(Math.abs(this[\"_\"+a[o]]-t[\"_\"+a[o]])>r)return!1;return!0},i.toJSON=function(){return[n].concat(a.map(function(t){return this[\"_\"+t]},this))};for(var u in o)if(o.hasOwnProperty(u)){var h=u.match(/^from(.*)$/);h?t[h[1].toUpperCase()].prototype[n.toLowerCase()]=o[u]:i[u]=o[u]}return i[n.toLowerCase()]=function(){return this},i.toString=function(){return\"[\"+n+\" \"+a.map(function(t){return this[\"_\"+t]},this).join(\", \")+\"]\"},a.forEach(function(t){var r=\"black\"===t?\"k\":t.charAt(0);i[t]=i[r]=function(r,e){return void 0===r?this[\"_\"+t]:e?new this.constructor(a.map(function(e){return this[\"_\"+e]+(t===e?r:0)},this)):new this.constructor(a.map(function(e){return t===e?r:this[\"_\"+e]},this))}}),r.forEach(function(t){s(n,t),s(t,n)}),r.push(n),t},t.pluginList=[],t.use=function(r){return-1===t.pluginList.indexOf(r)&&(this.pluginList.push(r),r(t)),t},t.installMethod=function(e,n){return r.forEach(function(r){t[r].prototype[e]=n}),this},t.installColorSpace(\"RGB\",[\"red\",\"green\",\"blue\",\"alpha\"],{hex:function(){var t=(65536*Math.round(255*this._red)+256*Math.round(255*this._green)+Math.round(255*this._blue)).toString(16);return\"#\"+\"00000\".substr(0,6-t.length)+t},hexa:function(){var t=Math.round(255*this._alpha).toString(16);return\"#\"+\"00\".substr(0,2-t.length)+t+this.hex().substr(1,6)},css:function(){return\"rgb(\"+Math.round(255*this._red)+\",\"+Math.round(255*this._green)+\",\"+Math.round(255*this._blue)+\")\"},cssa:function(){return\"rgba(\"+Math.round(255*this._red)+\",\"+Math.round(255*this._green)+\",\"+Math.round(255*this._blue)+\",\"+this._alpha+\")\"}});var s=t,i=function(t){t.installColorSpace(\"HSV\",[\"hue\",\"saturation\",\"value\",\"alpha\"],{rgb:function(){var r,e,n,a=this._hue,o=this._saturation,s=this._value,i=Math.min(5,Math.floor(6*a)),u=6*a-i,h=s*(1-o),c=s*(1-u*o),f=s*(1-(1-u)*o);switch(i){case 0:r=s,e=f,n=h;break;case 1:r=c,e=s,n=h;break;case 2:r=h,e=s,n=f;break;case 3:r=h,e=c,n=s;break;case 4:r=f,e=h,n=s;break;case 5:r=s,e=h,n=c}return new t.RGB(r,e,n,this._alpha)},hsl:function(){var r,e=(2-this._saturation)*this._value,n=this._saturation*this._value,a=e<=1?e:2-e;return r=a<1e-9?0:n/a,new t.HSL(this._hue,r,e/2,this._alpha)},fromRgb:function(){var r,e=this._red,n=this._green,a=this._blue,o=Math.max(e,n,a),s=Math.min(e,n,a),i=o-s,u=0===o?0:i/o,h=o;if(0===i)r=0;else switch(o){case e:r=(n-a)/i/6+(n<a?1:0);break;case n:r=(a-e)/i/6+1/3;break;case a:r=(e-n)/i/6+2/3}return new t.HSV(r,u,h,this._alpha)}})},u=function(t){t.use(i),t.installColorSpace(\"HSL\",[\"hue\",\"saturation\",\"lightness\",\"alpha\"],{hsv:function(){var r,e=2*this._lightness,n=this._saturation*(e<=1?e:2-e);return r=e+n<1e-9?0:2*n/(e+n),new t.HSV(this._hue,r,(e+n)/2,this._alpha)},rgb:function(){return this.hsv().rgb()},fromRgb:function(){return this.hsv().hsl()}})};return s.use(i).use(u)});\n//# sourceMappingURL=one-color.map\n","var div = partial(e, 'div');\n\nfunction e(type, klass, p) {\n    var elem = document.createElement(type);\n    elem.className = klass;\n    p.appendChild(elem);\n\n    return elem;\n}\n\n// http://stackoverflow.com/questions/4394747/javascript-curry-function\nfunction partial(fn) {\n    var slice = Array.prototype.slice;\n    var args = slice.apply(arguments, [1]);\n\n    return function() {\n        return fn.apply(null, args.concat(slice.apply(arguments)));\n    };\n}\n\nfunction labelInput(klass, n, p, maxLen) {\n    var id = \"colorPickerInput\" + Math.floor(Math.random() * 1001);\n    var d = div(klass, p);\n    var l = label(n, d, id);\n    var i = input('text', d, maxLen, id);\n\n    return {\n        label: l, \n        input: i\n    };\n}\n\nfunction label(c, p, id) {\n    var elem = e('label', '', p);\n    elem.innerHTML = c;\n\n    if (id) {\n        elem.setAttribute('for', id);\n    }\n\n    return elem;\n}\n\nfunction input(t, p, maxLen, id) {\n    var elem = e('input', '', p);\n    elem.type = t;\n\n    if(maxLen) { \n        elem.maxLength = maxLen;\n    }\n\n    if (id) {\n        elem.setAttribute('id', id);\n    }\n\n    if(maxLen) {\n        elem.maxLength = maxLen;\n    }\n\n    return elem;\n}\n\nfunction X(p, a) {\n    p.style.left = clamp(a * 100, 0, 100) + '%';\n}\nfunction Y(p, a) {\n    p.style.top = clamp(a * 100, 0, 100) + '%';\n}\nfunction BG(e, c) {\n    e.style.background = c;\n}\n\nfunction clamp(a, minValue, maxValue) {\n    return Math.min(Math.max(a, minValue), maxValue);\n}\n\nmodule.exports = {\n    clamp: clamp,\n    e: e,\n    div: div,\n    partial: partial,\n    labelInput: labelInput,\n    X: X,\n    Y: Y,\n    BG: BG\n};\n","var drag = require('dragjs');\nvar utils = require('./utils');\n\nfunction currentColor(p) {\n    var e1 = utils.div('currentColorContainer', p);\n    var e = utils.div('currentColor', e1);\n\n    return {\n        change: function(col) {\n            utils.BG(e, col.cssa());\n        }\n    };\n}\n\nfunction fields(p, joe, o) {\n    var cs = o.space;\n    var fac = o.limit || 255;\n    var fix = o.fix >= 0? o.fix: 0;\n    var inputLen = ('' + fac).length + fix;\n    inputLen = fix? inputLen + 1: inputLen;\n\n    var initials = cs.split('');\n    var useAlpha = cs[cs.length - 1] == 'A';\n    cs = useAlpha? cs.slice(0, -1): cs;\n\n    if(['RGB', 'HSL', 'HSV', 'CMYK'].indexOf(cs) < 0) {\n        return console.warn('Invalid field names', cs);\n    }\n\n    var c = utils.div('colorFields', p);\n    var elems = initials.map(function(n) {\n        n = n.toLowerCase();\n\n        var e = utils.labelInput('color ' + n, n, c, inputLen);\n        e.input.onblur = done;\n        e.input.onkeydown = validate;\n        e.input.onkeyup = update;\n\n        return {\n            name: n, \n            e: e\n        };\n    });\n\n    function done() {\n        joe.done();\n    }\n\n    function validate(e) {\n        if (!(e.ctrlKey || e.altKey) && /^[a-zA-Z]$/.test(e.key)) {\n            e.preventDefault();\n        }\n    }\n\n    function update() {\n        var col = [cs];\n\n        elems.forEach(function(o) {col.push(o.e.input.value / fac);});\n\n        if(!useAlpha) {\n            col.push(joe.getAlpha());\n        }\n\n        joe.set(col);\n    }\n\n    return {\n        change: function(col) {\n            elems.forEach(function(o) {\n                o.e.input.value = (col[o.name]() * fac).toFixed(fix);\n            });\n        }\n    };\n}\n\nfunction alpha(p, joe) {\n    var e = drag.slider({\n        parent: p,\n        'class': 'oned alpha',\n        cbs: {\n            begin: change,\n            change: change,\n            end: done\n        }\n    });\n\n    function done() {\n        joe.done();\n    }\n\n    function change(p) {\n        var val = utils.clamp(p.y, 0, 1);\n\n        utils.Y(p.pointer, val);\n        joe.setAlpha(1 - val);\n    }\n\n    return {\n        change: function(col) {\n            utils.Y(e.pointer, 1 - col.alpha());\n        }\n    };\n}\n\nfunction hex(p, joe, o) {\n    var e = utils.labelInput('hex', o.label || '', p, 7);\n    e.input.value = '#';\n\n    e.input.onkeyup = function(elem) {\n        var key = elem.keyCode || elem.which;\n        var val = elem.target.value;\n        val = val[0] == '#'? val: '#' + val;\n        val = pad(val, 7, '0');\n\n        if(key == 13) {\n            joe.set(val);\n        }\n    };\n\n    e.input.onblur = function(elem) {\n        joe.set(elem.target.value);\n        joe.done();\n    };\n\n    return {\n        change: function(col) {\n            e.input.value = e.input.value[0] == '#'? '#': '';\n            e.input.value += col.hex().slice(1);\n        }\n    };\n}\n\nfunction close(p, joe, o) {\n    var elem = utils.e('a', o['class'] || 'close', p);\n    elem.href = '#';\n    elem.innerHTML = o.label || 'Close';\n\n    elem.onclick = function(e) {\n        e.preventDefault();\n\n        joe.hide();\n    };\n}\n\nfunction pad(a, n, c) {\n    var ret = a;\n\n    for(var i = a.length; i < n; i++) {\n        ret += c;\n    }\n\n    return ret;\n}\n\nmodule.exports = {\n    currentColor: currentColor,\n    fields: fields,\n    hex: hex,\n    alpha: alpha,\n    close: close\n};\n","var drag = require('dragjs');\nvar ONECOLOR = require('onecolor/one-color'); // Use the minimal build without color names\nvar utils = require('./utils');\nvar extras = require('./extras');\n\nvar colorjoe = function(cbs) {\n    if (!all(isFunction, [cbs.init, cbs.xy, cbs.z])) {\n        return console.warn(\"colorjoe: missing cb\");\n    }\n\n    return function(element, initialColor, extras) {\n        return setup({\n            e: element,\n            color: initialColor,\n            cbs: cbs,\n            extras: extras,\n        });\n    };\n};\n\n/* pickers */\ncolorjoe.rgb = colorjoe({\n    init: function(col, xy, z) {\n        var ret = ONECOLOR(col).hsv();\n\n        this.xy(ret, { x: ret.saturation(), y: 1 - ret.value() }, xy, z);\n        this.z(ret, ret.hue(), xy, z);\n\n        return ret;\n    },\n    xy: function(col, p, xy) {\n        utils.X(xy.pointer, p.x);\n        utils.Y(xy.pointer, p.y);\n\n        return col.saturation(p.x).value(1 - p.y);\n    },\n    z: function(col, v, xy, z) {\n        utils.Y(z.pointer, v);\n        RGB_BG(xy.background, v);\n\n        return col.hue(v);\n    },\n});\n\ncolorjoe.hsl = colorjoe({\n    init: function(col, xy, z) {\n        var ret = ONECOLOR(col).hsl();\n\n        this.xy(ret, { x: ret.hue(), y: 1 - ret.saturation() }, xy, z);\n        this.z(ret, 1 - ret.lightness(), xy, z);\n\n        return ret;\n    },\n    xy: function(col, p, xy, z) {\n        utils.X(xy.pointer, p.x);\n        utils.Y(xy.pointer, p.y);\n        RGB_BG(z.background, p.x);\n\n        return col.hue(p.x).saturation(1 - p.y);\n    },\n    z: function(col, v, xy, z) {\n        utils.Y(z.pointer, v);\n\n        return col.lightness(1 - v);\n    },\n});\n\ncolorjoe.extras = {};\n\ncolorjoe.registerExtra = function(name, fn) {\n    if (name in colorjoe.extras) {\n        console.warn('Extra \"' + name + '\"has been registered already!');\n    }\n\n    colorjoe.extras[name] = fn;\n};\n\nfor (var k in extras) {\n    colorjoe.registerExtra(k, extras[k]);\n}\n\nfunction RGB_BG(e, h) {\n    utils.BG(e, new ONECOLOR.HSV(h, 1, 1).cssa());\n}\n\nfunction setup(o) {\n    if (!o.e) {\n        return console.warn(\"colorjoe: missing element\");\n    }\n\n    var e = isString(o.e) ? document.getElementById(o.e) : o.e;\n    e.className = \"colorPicker\";\n\n    var cbs = o.cbs;\n\n    var xy = drag.xyslider({\n        parent: e,\n        class: \"twod\",\n        cbs: {\n            begin: changeXY,\n            change: changeXY,\n            end: done,\n        },\n    });\n\n    function changeXY(p) {\n        col = cbs.xy(\n            col,\n            {\n                x: utils.clamp(p.x, 0, 1),\n                y: utils.clamp(p.y, 0, 1),\n            },\n            xy,\n            z\n        );\n        changed();\n    }\n\n    var z = drag.slider({\n        parent: e,\n        class: \"oned\",\n        cbs: {\n            begin: changeZ,\n            change: changeZ,\n            end: done,\n        },\n    });\n\n    function changeZ(p) {\n        col = cbs.z(col, utils.clamp(p.y, 0, 1), xy, z);\n        changed();\n    }\n\n    // Initial color\n    var previous = getColor(o.color);\n    var col = cbs.init(previous, xy, z);\n    var listeners = { change: [], done: [] };\n\n    function changed(skip) {\n        skip = isArray(skip) ? skip : [];\n\n        var li = listeners.change;\n        var v;\n\n        for (var i = 0, len = li.length; i < len; i++) {\n            v = li[i];\n            if (skip.indexOf(v.name) == -1) {\n                v.fn(col);\n            }\n        }\n    }\n\n    function done() {\n        // Do not call done callback if the color did not change\n        if (previous.equals(col)) {\n            return;\n        }\n\n        for (var i = 0, len = listeners.done.length; i < len; i++) {\n            listeners.done[i].fn(col);\n        }\n\n        previous = col;\n    }\n\n    var ob = {\n        e: e,\n        done: function() {\n            done();\n\n            return this;\n        },\n        update: function(skip) {\n            changed(skip);\n\n            return this;\n        },\n        hide: function() {\n            e.style.display = \"none\";\n\n            return this;\n        },\n        show: function() {\n            e.style.display = \"\";\n\n            return this;\n        },\n        get: function() {\n            return col;\n        },\n        set: function(c) {\n            var oldCol = this.get();\n            col = cbs.init(getColor(c), xy, z);\n\n            if (!oldCol.equals(col)) {\n                this.update();\n            }\n\n            return this;\n        },\n        getAlpha: function() {\n            return col.alpha();\n        },\n        setAlpha: function(v) {\n            col = col.alpha(v);\n\n            this.update();\n\n            return this;\n        },\n        on: function(evt, cb, name) {\n            if (evt == \"change\" || evt == \"done\") {\n                listeners[evt].push({ name: name, fn: cb });\n            } else {\n                console.warn(\n                    'Passed invalid evt name \"' + evt + '\" to colorjoe.on'\n                );\n            }\n\n            return this;\n        },\n        removeAllListeners: function(evt) {\n            if (evt) {\n                delete listeners[evt];\n            } else {\n                for (var key in listeners) {\n                    delete listeners[key];\n                }\n            }\n\n            return this;\n        },\n    };\n\n    setupExtras(e, ob, o.extras);\n    changed();\n\n    return ob;\n}\n\nfunction getColor(c) {\n    if (!isDefined(c)) {\n        return ONECOLOR(\"#000\");\n    }\n    if (c.isColor) {\n        return c;\n    }\n\n    var ret = ONECOLOR(c);\n\n    if (ret) {\n        return ret;\n    }\n\n    if (isDefined(c)) {\n        console.warn(\"Passed invalid color to colorjoe, using black instead\");\n    }\n\n    return ONECOLOR(\"#000\");\n}\n\nfunction setupExtras(p, joe, extras) {\n    if (!extras) {\n        return;\n    }\n\n    var c = utils.div(\"extras\", p);\n    var cbs;\n    var name;\n    var params;\n\n    extras.forEach(function(e, i) {\n        if (isArray(e)) {\n            name = e[0];\n            params = e.length > 1 ? e[1] : {};\n        } else {\n            name = e;\n            params = {};\n        }\n        var extra = name in colorjoe._extras ? colorjoe._extras[name] : null;\n\n        if (extra) {\n            cbs = extra(c, extraProxy(joe, name + i), params);\n            for (var k in cbs) {\n                joe.on(k, cbs[k], name);\n            }\n        }\n    });\n}\n\nfunction extraProxy(joe, name) {\n    var ret = copy(joe);\n\n    ret.update = function() {\n        joe.update([name]);\n    };\n\n    return ret;\n}\n\nfunction copy(o) {\n    // returns a shallow copy\n    var ret = {};\n\n    for (var k in o) {\n        ret[k] = o[k];\n    }\n\n    return ret;\n}\n\nfunction all(cb, a) {\n    return a.map(cb).filter(id).length == a.length;\n}\n\nfunction isArray(o) {\n    return Object.prototype.toString.call(o) === \"[object Array]\";\n}\nfunction isString(o) {\n    return typeof o === \"string\";\n}\nfunction isDefined(input) {\n    return typeof input !== \"undefined\";\n}\nfunction isFunction(input) {\n    return typeof input === \"function\";\n}\nfunction id(a) {\n    return a;\n}\n\nmodule.exports = colorjoe;\n"],"names":["module","drag","elem","cbs","dragTemplate","console","warn","xyslider","o","twod","div","parent","pointer","attachPointer","background","slider","oned","ret","n","wrap","fn","p","klass","type","document","createElement","className","appendChild","down","move","up","initialOffset","initialPos","beginCb","begin","empty","change","end","c","x","offsetLeft","y","offsetTop","cursor","style","changeCb","endCb","on","e","moveHandler","slice","Array","prototype","args","apply","arguments","concat","partial","callCb","upHandler","off","evt","handler","addEventListener","removeEventListener","prop","value","cb","preventDefault","r","offset","getBoundingClientRect","left","top","width","clientWidth","height","clientHeight","touches","length","clientX","clientY","isNaN","t","isArray","RGB","toLowerCase","namedColors","s","match","i","toUpperCase","u","parseFloat","h","f","l","Error","replace","parseInt","CMYK","d","RegExp","a","source","isColor","installColorSpace","this","rgb","propertyNames","forEach","charAt","hasOwnProperty","_alpha","join","_hue","Math","floor","hex","equals","abs","toJSON","map","toString","constructor","push","pluginList","use","indexOf","installMethod","round","_red","_green","_blue","substr","hexa","css","cssa","_saturation","_value","min","hsl","HSL","fromRgb","max","HSV","hsv","_lightness","clamp","minValue","maxValue","labelInput","maxLen","id","random","label","innerHTML","setAttribute","input","maxLength","X","Y","BG","currentColor","e1","utils","col","fields","joe","cs","space","fac","limit","fix","inputLen","initials","split","useAlpha","elems","onblur","done","onkeydown","validate","onkeyup","update","name","ctrlKey","altKey","test","key","getAlpha","set","toFixed","keyCode","which","val","target","pad","alpha","class","setAlpha","close","href","onclick","hide","colorjoe","isFunction","init","xy","z","filter","element","initialColor","extras","getElementById","changeXY","changed","changeZ","previous","getColor","color","listeners","skip","v","li","len","ob","display","show","get","oldCol","removeAllListeners","params","extra","_extras","k","copy","setupExtras","setup","ONECOLOR","saturation","hue","RGB_BG","lightness","registerExtra","isDefined","Object","call"],"mappings":"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"}