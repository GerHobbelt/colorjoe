!function(n,e){void 0===n&&void 0!==window&&(n=window),"function"==typeof define&&define.amd?define(["ONECOLOR"],function(t){return n.colorjoe=e(t)}):"object"==typeof module&&module.exports?module.exports=e(require("onecolor")):n.colorjoe=e(n["one.color"])}(this,function(n){var e=function(){function n(n,e){n?(r(n,e,"touchstart","touchmove","touchend"),r(n,e,"mousedown","mousemove","mouseup")):console.warn("drag is missing elem!")}return n.xyslider=function(r){var o=t(r.class||"",r.parent),i=t("pointer",o);return t("shape shape1",i),t("shape shape2",i),t("bg bg1",o),t("bg bg2",o),n(o,e(r.cbs,i)),{background:o,pointer:i}},n.slider=function(r){var o=t(r.class,r.parent),i=t("pointer",o);return t("shape",i),t("bg",o),n(o,e(r.cbs,i)),{background:o,pointer:i}},n;function e(n,e){var t={};for(var r in n)t[r]=o(n[r]);function o(n){return function(t){t.pointer=e,n(t)}}return t}function t(n,e){return function(n,e,t){var r=document.createElement(n);e&&(r.className=e);return t.appendChild(r),r}("div",n,e)}function r(n,e,t,r,l){var s,f,p,h=(e=(s=e)?{begin:s.begin||a,change:s.change||a,end:s.end||a}:{begin:function(n){f={x:n.elem.offsetLeft,y:n.elem.offsetTop},p=n.cursor},change:function(n){u(n.elem,"left",f.x+n.cursor.x-p.x+"px"),u(n.elem,"top",f.y+n.cursor.y-p.y+"px")},end:a}).begin,d=e.change,v=e.end;o(n,t,function(e){!0;var t=function(n){var e=Array.prototype.slice,t=e.apply(arguments,[1]);return function(){return n.apply(null,t.concat(e.apply(arguments)))}}(c,d,n);o(document,r,t),o(document,l,function o(){!1,i(document,r,t),i(document,l,o),c(v,n,e)}),c(h,n,e)})}function o(n,e,t){n.addEventListener(e,t,!1)}function i(n,e,t){n.removeEventListener(e,t,!1)}function u(n,e,t){n.style[e]=t}function a(){}function c(n,e,t){t.preventDefault();var r,o,i,u={x:(r=e.getBoundingClientRect()).left,y:r.top},a=e.clientWidth,c=e.clientHeight,l={x:(i=t,(i.touches?i.touches[i.touches.length-1]:i).clientX),y:(o=t,(o.touches?o.touches[o.touches.length-1]:o).clientY)},s=(l.x-u.x)/a,f=(l.y-u.y)/c;n({x:isNaN(s)?0:s,y:isNaN(f)?0:f,cursor:l,elem:e,e:t})}}(),t=o(r,"div");function r(n,e,t){var r=document.createElement(n);return r.className=e,t.appendChild(r),r}function o(n){var e=Array.prototype.slice,t=e.apply(arguments,[1]);return function(){return n.apply(null,t.concat(e.apply(arguments)))}}function i(n,e,t){return Math.min(Math.max(n,e),t)}var u={clamp:i,e:r,div:t,partial:o,labelInput:function(n,e,o,i){var u="colorPickerInput"+Math.floor(1001*Math.random()),a=t(n,o);return{label:(h=e,d=a,v=u,g=r("label","",d),g.innerHTML=h,v&&g.setAttribute("for",v),g),input:(c="text",l=a,s=i,f=u,p=r("input","",l),p.type=c,s&&(p.maxLength=s),f&&p.setAttribute("id",f),s&&(p.maxLength=s),p)};var c,l,s,f,p;var h,d,v,g},X:function(n,e){n.style.left=i(100*e,0,100)+"%"},Y:function(n,e){n.style.top=i(100*e,0,100)+"%"},BG:function(n,e){n.style.background=e}};var a={currentColor:function(n){var e=u.div("currentColorContainer",n),t=u.div("currentColor",e);return{change:function(n){u.BG(t,n.cssa())}}},fields:function(n,e,t){var r=t.space,o=t.limit||255,i=t.fix>=0?t.fix:0,a=(""+o).length+i;a=i?a+1:a;var c=r.split(""),l="A"==r[r.length-1];if(r=l?r.slice(0,-1):r,["RGB","HSL","HSV","CMYK"].indexOf(r)<0)return console.warn("Invalid field names",r);var s=u.div("colorFields",n),f=c.map(function(n){n=n.toLowerCase();var e=u.labelInput("color "+n,n,s,a);return e.input.onblur=p,e.input.onkeydown=h,e.input.onkeyup=d,{name:n,e:e}});function p(){e.done()}function h(n){n.ctrlKey||n.altKey||!/^[a-zA-Z]$/.test(n.key)||n.preventDefault()}function d(){var n=[r];f.forEach(function(e){n.push(e.e.input.value/o)}),l||n.push(e.getAlpha()),e.set(n)}return{change:function(n){f.forEach(function(e){e.e.input.value=(n[e.name]()*o).toFixed(i)})}}},hex:function(n,e,t){var r=u.labelInput("hex",t.label||"",n,7);return r.input.value="#",r.input.onkeyup=function(n){var t=n.keyCode||n.which,r=n.target.value;r=function(n,e,t){for(var r=n,o=n.length;o<e;o++)r+=t;return r}(r="#"==r[0]?r:"#"+r,7,"0"),13==t&&e.set(r)},r.input.onblur=function(n){e.set(n.target.value),e.done()},{change:function(n){r.input.value="#"==r.input.value[0]?"#":"",r.input.value+=n.hex().slice(1)}}},alpha:function(n,t){var r=e.slider({parent:n,class:"oned alpha",cbs:{begin:o,change:o,end:function(){t.done()}}});function o(n){var e=u.clamp(n.y,0,1);u.Y(n.pointer,e),t.setAlpha(1-e)}return{change:function(n){u.Y(r.pointer,1-n.alpha())}}},close:function(n,e,t){var r=u.e("a",t.class||"close",n);r.href="#",r.innerHTML=t.label||"Close",r.onclick=function(n){n.preventDefault(),e.hide()}}},c=function(n){return t=d,(r=[n.init,n.xy,n.z]).map(t).filter(v).length!=r.length?console.warn("colorjoe: missing cb"):function(t,r,o){return function(n){if(!n.e)return console.warn("colorjoe: missing element");var t=(r=n.e,"string"==typeof r?document.getElementById(n.e):n.e);var r;t.className="colorPicker";var o=n.cbs,i=e.xyslider({parent:t,class:"twod",cbs:{begin:a,change:a,end:y}});function a(n){d=o.xy(d,{x:u.clamp(n.x,0,1),y:u.clamp(n.y,0,1)},i,l),g()}var l=e.slider({parent:t,class:"oned",cbs:{begin:s,change:s,end:y}});function s(n){d=o.z(d,u.clamp(n.y,0,1),i,l),g()}var h=f(n.color),d=o.init(h,i,l),v={change:[],done:[]};function g(n){n=p(n)?n:[];for(var e,t=v.change,r=0,o=t.length;r<o;r++)e=t[r],-1==n.indexOf(e.name)&&e.fn(d)}function y(){if(!h.equals(d)){for(var n=0,e=v.done.length;n<e;n++)v.done[n].fn(d);h=d}}var m={e:t,done:function(){return y(),this},update:function(n){return g(n),this},hide:function(){return t.style.display="none",this},show:function(){return t.style.display="",this},get:function(){return d},set:function(n){var e=this.get();return d=o.init(f(n),i,l),e.equals(d)||this.update(),this},getAlpha:function(){return d.alpha()},setAlpha:function(n){return d=d.alpha(n),this.update(),this},on:function(n,e,t){return"change"==n||"done"==n?v[n].push({name:t,fn:e}):console.warn('Passed invalid evt name "'+n+'" to colorjoe.on'),this},removeAllListeners:function(n){if(n)delete v[n];else for(var e in v)delete v[e];return this}};return function(n,e,t){if(t){var r,o,i,a=u.div("extras",n);t.forEach(function(n,t){p(n)?(o=n[0],i=n.length>1?n[1]:{}):(o=n,i={});var u,l,s,f=o in c._extras?c._extras[o]:null;if(f)for(var h in r=f(a,(l=o+t,(s=function(n){var e={};for(var t in n)e[t]=n[t];return e}(u=e)).update=function(){u.update([l])},s),i))e.on(h,r[h],o)})}}(t,m,n.extras),g(),m}({e:t,color:r,cbs:n,extras:o})};var t,r};for(var l in c.rgb=c({init:function(e,t,r){var o=n(e).hsv();return this.xy(o,{x:o.saturation(),y:1-o.value()},t,r),this.z(o,o.hue(),t,r),o},xy:function(n,e,t){return u.X(t.pointer,e.x),u.Y(t.pointer,e.y),n.saturation(e.x).value(1-e.y)},z:function(n,e,t,r){return u.Y(r.pointer,e),s(t.background,e),n.hue(e)}}),c.hsl=c({init:function(e,t,r){var o=n(e).hsl();return this.xy(o,{x:o.hue(),y:1-o.saturation()},t,r),this.z(o,1-o.lightness(),t,r),o},xy:function(n,e,t,r){return u.X(t.pointer,e.x),u.Y(t.pointer,e.y),s(r.background,e.x),n.hue(e.x).saturation(1-e.y)},z:function(n,e,t,r){return u.Y(r.pointer,e),n.lightness(1-e)}}),c._extras={},c.registerExtra=function(n,e){n in c._extras&&console.warn('Extra "'+n+'"has been registered already!'),c._extras[n]=e},a)c.registerExtra(l,a[l]);function s(e,t){u.BG(e,new n.HSV(t,1,1).cssa())}function f(e){if(!h(e))return n("#000");if(e.isColor)return e;var t=n(e);return t||(h(e)&&console.warn("Passed invalid color to colorjoe, using black instead"),n("#000"))}function p(n){return"[object Array]"===Object.prototype.toString.call(n)}function h(n){return void 0!==n}function d(n){return"function"==typeof n}function v(n){return n}return c});